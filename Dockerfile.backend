FROM node:20-alpine

# Verify npm is installed
RUN npm --version && node --version

WORKDIR /app/backend

COPY backend/package*.json ./

# Install dependencies
RUN npm install --verbose

COPY backend/ ./

ENV NODE_ENV=production
ENV PORT=3000

EXPOSE 3000

CMD ["node", "index.js"]
